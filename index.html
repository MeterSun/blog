<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/editormd.preview.css" />
    <style>
        #content{
            width: 691px;
            margin: 0px auto;
        }
        @media screen and (max-width: 768px) {
            #content{
                width: 90%;
            }
        }
        .blogitem{
            border-bottom: 1px solid rgb(185, 185, 185);
        }
        a:link,a:visited{
            color: rgb(0, 0, 200);
            text-decoration:none;  /*超链接无下划线*/
        }
        a:hover{
            text-decoration:underline;  /*鼠标放上去有下划线*/
        }
        .title{
            font-size: larger;
            font-weight: bolder;
        }
        .details{
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin: 5px 0;
        }
        .taglist{
            /* display: inline; */
            list-style: none;
            padding-left: 20px;
            padding-right: 20px;
            margin: 0px;
        }
        .tags{
            display: inline-block;
            border-radius: 5px;
            padding: 1px 5px;
            margin: 2px 5px;
            font-size: small;
            background-color: #dfdfdf;
            box-shadow: inset 0px 0 10px 2px #dfdfdf;
            cursor: pointer;
        }
        .date{
            font-size: small;
            display: inline-block;
        }
    </style>
    <title>My Blog</title>
    <!-- <script src="https://cdn.jsdelivr.net/npm/jquery"></script> -->
    <!-- <script src="https://cdn.bootcss.com/vue/2.5.16/vue.min.js"></script> -->
    <script src="./js/jquery-3.2.1.min.js"></script>
    <script src="./js/vue.min.js"></script>
    <script src="./lib/marked.min.js"></script>
    <script src="./lib/prettify.min.js"></script>
    <script src="./lib/raphael.min.js"></script>
    <script src="./lib/underscore.min.js"></script>
    <script src="./lib/sequence-diagram.min.js"></script>
    <script src="./lib/flowchart.min.js"></script>
    <script src="./lib/jquery.flowchart.min.js"></script>
    <script src="./js/editormd.js"></script>
    <script src="./js/md.js"></script>
</head>

<body>
    <div id="content">
        <h1>{{ title }}</h1>
        <div class="taglist">
            <div class="tags">全部标签</div>
            <div class="tags" v-for="(item, index) in tags" :key="index" v-on:click="findtag(item)">{{ item }}</div>
        </div>
        <hr>
        <div v-for="(item, index) in content" :key="index" class="blogitem">
            <div class="title"><a :href="'./blog.html?p='+item.filename"> {{ item.title }}  </a></div>
            <div class="details">
                <ul class="taglist"><li class="tags" v-for="tag in item.tags" v-on:click="findtag(tag)">{{ tag }}</li></ul>
                <time class="date">{{ item.date }}</time>
            </div>
        </div>
    </div>
</body>
<script>
    var vm = new Vue({
        el:'#content',
        data:{
            title:'',
            tags:[],
            content:[],
        },
        methods:{
            findtag:function(tag){
                location.search='?tag='+tag;
            }
        },
        created:function() {
            var tag = getQueryString('tag');
            this.title = tag ||　'My Blog';
            tag = tag || 'all';
            !function (obj) {
                $.getJSON('./package/content.json',function (data) {
                    obj.content = tag=='all' ? data[tag]:joinArrByIndex(data[tag],data['all']);
                    LOG && console.log(obj.content);
                    for (const key in data) obj.tags.push(key);
                });
            }(this);
        },
    });
</script>
</html>